<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ reportTitle }}</title>
  <style>
    /* CSS Reset and Basic Typography */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      margin: 0;
      padding: 0;
      background: #fff;
      color: #333;
      font-size: 10px; /* Base font size for PDF */
    }

    /* A4 Page Layout */
    .page {
      width: 210mm;
      height: 297mm;
      padding: 20mm;
      box-sizing: border-box;
      position: relative;
    }

    /* ---- HEADER AND FOOTER with CSS ---- */
    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      /* Fixed Header for every page */
      .header {
        position: fixed;
        top: 0;
        left: 20mm;
        right: 20mm;
        height: 15mm;
        border-bottom: 1px solid #ddd;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      /* Fixed Footer for every page */
      .footer {
        position: fixed;
        bottom: 0;
        left: 20mm;
        right: 20mm;
        height: 15mm;
        border-top: 1px solid #ddd;
        text-align: center;
        line-height: 15mm;
        font-size: 8px;
        color: #777;
      }

      /* This is the magic for pagination */
      /* We create a "page-counter" and display it in the footer */
      .page-counter::after {
        counter-increment: page;
        content: "Page " counter(page);
      }
      body {
        counter-reset: page;
      }
    }

    .logo {
      max-width: 150px;
      max-height: 12mm;
    }

    h1 {
      color: #1a237e;
      text-align: right;
      margin: 0;
    }

    .report-body {
      padding-top: 20mm; /* Space for the fixed header */
      padding-bottom: 20mm; /* Space for the fixed footer */
    }

    .customer-info {
      margin-top: 10mm;
      margin-bottom: 10mm;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5mm;
    }

    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }

    thead {
      background-color: #f2f2f2;
      color: #333;
    }

    /* A very important rule to prevent table rows from being split across pages */
    tr {
      page-break-inside: avoid;
    }

    .total-section {
      margin-top: 10mm;
      text-align: right;
      font-size: 1.2em;
      font-weight: bold;
    }
  </style>
</head>
<body>

<!-- This div will be picked up by the @media print styles -->
<div class="header">
  <!-- The logo is embedded as a Base64 string, so it needs no external request -->
  <img src="{{logoImage}}" alt="Company Logo" class="logo">
  <h1>{{ reportTitle }}</h1>
</div>

<div class="footer">
  <span class="page-counter"></span> | Â© {{year}} {{companyName}}. All rights reserved.
</div>

<div class="page">
  <div class="report-body">
    <div class="customer-info">
      <strong>Bill To:</strong><br>
      {{customer.name}}<br>
      {{customer.address}}<br>
      <strong>Order ID:</strong> {{orderId}}
    </div>

    <p>Here is a detailed breakdown of the activities for the period. Thank you for your business!</p>

    <table>
      <thead>
      <tr>
        <th>#</th>
        <th>Item Description</th>
        <th>Quantity</th>
        <th>Unit Price</th>
        <th>Total</th>
      </tr>
      </thead>
      <tbody>
      {{#each items}}
        <tr>
          <td>{{this.id}}</td>
          <td>{{this.description}}</td>
          <td>{{this.quantity}}</td>
          <td>${{this.price}}</td>
          <td>${{this.total}}</td>
        </tr>
      {{/each}}
      </tbody>
    </table>

    <div class="total-section">
      Grand Total: ${{grandTotal}}
    </div>

    <div>
      <img src="{{contentImage}}" alt="Content img" class="content-img">
    </div>

    <div class="notes-section" style="margin-top: 15mm; page-break-before: auto;">
      <h3>Terms and Conditions</h3>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit animi id est laborum.</p>
    </div>
  </div>
</div>

</body>
</html>
